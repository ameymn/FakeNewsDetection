<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fake News Detection</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

  <link rel="stylesheet" href="{{ request.url_for('static', path='index.css') }}">
</head>

<body>
<div class="container my-5">
  <div class="card p-4 shadow-lg" style="background: rgba(0,0,0,0.25); border-radius: 12px;">
    <h1 class="text-center text-white mb-4">Fake News Detection</h1>

    <form id="profileForm" action="/predict" method="post" autocomplete="off">
      <label for="news-box" class="form-label text-white fs-5">Enter your News here:</label>

      <textarea id="news-box" name="text" class="text mb-3" rows="10" required
                placeholder="Paste or type the news article here..."></textarea>


      <div class="d-flex gap-2">
        <button type="button" id="paste-btn" class="btn btn-secondary btn-sm">ðŸ“‹ Paste</button>
        <button type="submit" class="btn predict-btn flex-grow-1">Predict</button>
      </div>
    </form>

    {% if prediction %}
    <div class="result-card mt-3">
      <p class="result-line">Prediction: <strong>{{ prediction }}</strong></p>
      <p class="result-line">Probability: <strong>{{ probability }}%</strong></p>
    </div>
    {% endif %}
  </div>
</div>

<script>
  (function enforceTextareaWhite() {
    const ta = document.getElementById('news-box');

    function forceWhite() {
      ta.style.color = '#ffffff';
      ta.style.caretColor = '#ffffff';
      ta.style.webkitTextFillColor = '#ffffff';
    }

    document.addEventListener('DOMContentLoaded', () => {
      if (ta) forceWhite();
    });

    document.getElementById('paste-btn').addEventListener('click', async () => {
      try {
        const text = await navigator.clipboard.readText();
        if (text === "") {
          const manual = prompt("Clipboard empty. Paste text here:");
          if (manual !== null) ta.value = manual;
        } else {
          ta.value = text;
        }
      } catch (err) {
        const manual = prompt("Could not access clipboard directly. Paste your text here:");
        if (manual !== null) ta.value = manual;
      }
      setTimeout(forceWhite, 10);
      ta.focus();
    });

    ta.addEventListener('input', () => {
      setTimeout(forceWhite, 0);
    });

    ta.addEventListener('paste', () => setTimeout(forceWhite, 0));

    ta.addEventListener('focus', forceWhite);
  })();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>
</html>
